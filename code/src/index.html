<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Twitch Clip - trial</title>
  <link rel="icon" type="image/png" href="images/favicon.png">
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css'><link rel="stylesheet" href="css/style.css">
</head>
<body onload="startUp()">
<!-- partial:index.partial.html -->



<h2>Twitch Clips - trial</h2>
<div class="container" id="container">
	<div class="form-container sign-up-container">
		<form class="form">
			<h1>Create Account</h1>
			<span>Use your email for registration</span>
			<input type="text", id="firstName" placeholder="Name" />
			<input type="email", id="Email" placeholder="Email" />
			<input type="password", id="password1" placeholder="Password" />
			<button onclick="signIn()">Sign Up</button>
		</form>
	</div>
	<div class="form-container sign-in-container">
		<form class="form" id="signInForm">
			<h1>Sign in</h1>
			<input type="text" 	   id="EmailLogin" 		name="EmailLogin" 	placeholder="Email" />
			<input type="password" id="PasswordLogin" 	name="PasswordLogin"placeholder="Password" />
			<button type="submit">Sign In</button>
		</form>
	</div>
	<div class="overlay-container">
		<div class="overlay">
			<div class="overlay-panel overlay-left">
				<h1>Welcome Back!</h1>
				<p>If you already have an account, please use your account to log in.</p>
				<button class="ghost" id="signIn">Sign In</button>
			</div>
			<div class="overlay-panel overlay-right">
				<h1>Hello!</h1>
				<p>Thank you for using our website.If you dont have an account with us, please enter your personal details to create an account to start using our services.</p>
				<button class="ghost" id="signUp">Sign Up</button>
			</div>
		</div>
	</div>
</div>

<script>
	function startUp()
	{
		sessionStorage.setItem("BaseIP", "http://127.0.0.1:5000")		
	}

/* function signIn()
    {
        email = document.getElementById("EmailLogin").value
		password = document.getElementById("PasswordLogin").value
		//alert(email)

		data = {"email": email, "password": password}
        fetch('http://127.0.0.1:5000/signIn', {
		method: 'POST', // or 'PUT'
		headers: {
			'Content-Type': 'application/json',
		},
		body: JSON.stringify(data),
		}).then(response => response.json())
		.then(response =>{
            
			window.location = "selection.html"
			sessionStorage.setItem("token", JSON.stringify(response["token"]));
			alert(JSON.stringify(response))
            
			//return JSON.stringify(response)
			
		})
		.catch(error => {
			// handle the error
		});

    }
 */
 	startUp()
 	const signInForm = document.getElementById('signInForm')
	var BaseIP = sessionStorage.getItem("BaseIP")
	signInForm.addEventListener('submit', function(e) {
		e.preventDefault();

		email = document.getElementById("EmailLogin").value
		password = document.getElementById("PasswordLogin").value

		data = {"email": email, "password": password}
			
        fetch(BaseIP + '/signIn', {
			method: 'POST', // or 'PUT'
			headers: {
				'Content-Type': 'application/json',
			},
			body: JSON.stringify(data),
		}).then(function (response){
			return response.json()

		}).then(function (json){
			//alert(response.json())
			sessionStorage.setItem("token", json["token"]);
			window.location = "selection.html"
		}).catch(function(error){

		})
		
	})
	
</script>

<script>


</script>


<a href="selection.html"></a>

<!-- partial -->
<script src="js/script.js"></script>
  


</body>
</html>
