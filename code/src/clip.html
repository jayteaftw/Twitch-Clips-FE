<!DOCTYPE html>
<html lang="en">
<head>
    <title>Clips Page</title>
	<link rel= "stylesheet" href="css/style_clips.css">
    
</head>
<body onload="newClip()">
<script>
	 var clips = []

	function GetRequest()
	{
		let res;
		data = {"values":values}
        fetch('http://127.0.0.1:5000/query', {
		method: 'GET', // or 'PUT'
		headers: {
			'Content-Type': 'application/json',
		},
		body: JSON.stringify(data),
		}).then(response => response.json())
		.then(response =>{
            alert(JSON.stringify(response))
			res = response["links"]
			
			
		})
		.catch(error => {
			// handle the error
		});
		
		return res
	}
   
	function newClip() {

		if(clips.length < 1)
		{
			clips = GetRequest()
		}
		document.getElementById('myIframe').src = clips.pop()+"&parent=localhost&autoplay=true&muted=false";
	}
</script>

<iframe id="myIframe" src="" allow='autoplay'></iframe >
	<div class="mybuttons">
<button id="b1" value="Next Clip" onClick="newClip()">Next Clip</button>
<button id="b2" href="#" value="Logout">Logout</button>
</div>

</body>
</html>